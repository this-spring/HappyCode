!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).HappyCode=t()}(this,function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e,t){return e(t={exports:{}},t.exports),t.exports}var r=t(function(e,t){var s,o,r,i;t.__esModule=!0,(o=s=s||{}).KeyWords="KeyWords",o.Variable="Variable",o.Symbol="Symbol",o.Str="Str",o.Attribute="Attribute",o.Space="Space",o.Other="Other",o.Default="Default",t.CodeType=s,(i=r=r||{}).KeyWords="KeyWords",i.Variable="Variable",i.SymbolS="SymbolS",i.Str="Str",i.Attribute="Attribute",i.Space="Space",i.Other="Other",i.Default="Default",t.CssStyleType=r});e(r);var i=r.CodeType,n=r.CssStyleType,s=e(t(function(e,t){t.__esModule=!0;var s=(o.prototype.parseJsCode=function(e){for(this.code=e.trim(),this.tokenList=[];;){var t=this.getLetter(),s={CodeType:r.CodeType.Attribute,Token:t};if(this.isSpace(t)?s.CodeType=r.CodeType.Space:this.isOther(t)?s.CodeType=r.CodeType.Other:this.isKeyWords(t)?s.CodeType=r.CodeType.KeyWords:this.isVar(t)?s.CodeType=r.CodeType.Variable:this.isSym(t)?s.CodeType=r.CodeType.Symbol:this.isStr(t)?s.CodeType=r.CodeType.Str:this.isAttr(t)?s.CodeType=r.CodeType.Attribute:console.error(" CodeType is not defined token:",t),console.log(" token: ",t," index: ",this.index," code.length:",this.code.length),this.tokenList.push(s),this.index>=this.code.length){console.log(" tokenList:",JSON.stringify(this.tokenList));break}}return this.tokenList},o.prototype.seek=function(e){this.index+=e},o.prototype.getLetter=function(e){for(var t="",s=!1,o=!1,r=this.index;r<this.code.length;r+=1){var i=this.code[r],n=r+1<this.code.length?r+1:this.code.length-1,l=this.code[n];if(console.log(" i:",r," ch:",i)," "===i&&(o=!0,t+=" ")," "!==l&&o){o=!1;break}if(this.otherWords.get(i)){t=i;break}if(this.symbolWords.get(i)){t=i;break}if(" "===i||s){if((" "===l||this.symbolWords.get(l))&&s){t+=i,s=!1;break}}else s=!0;s&&(t+=i)}return e||(this.index=r+1),console.log(" letter token:",t),t},o.prototype.isKeyWords=function(e){return!!this.keyWords.get(e)&&this.lastCodeType!==r.CodeType.KeyWords},o.prototype.isVar=function(e){console.log(" isVar");var t=!1;return 0<this.tokenList.length&&this.findLastNotSpaceToken().CodeType===r.CodeType.KeyWords&&(t=!0),t},o.prototype.isSym=function(e){return console.log(" isSym"),!!this.symbolWords.get(e)},o.prototype.isStr=function(e){console.log(" isStr");var t,s=!1;return 0<this.tokenList.length&&((t=this.findLastNotSpaceToken()).Token!==this.symbolWords.get('"')&&t.Token!==this.symbolWords.get("'")||(s=!0)),s},o.prototype.isAttr=function(e){console.log(" isAttr");var t=!1;if(0<this.tokenList.length){for(var s=this.findLastNotSpaceToken(),o=void 0;!((o=this.getLetter(!0)).indexOf(" ")<0););console.log(" last:",s," next:",o),s.Token===this.symbolWords.get("{")&&o===this.symbolWords.get(":")&&(t=!0)}return t},o.prototype.isOther=function(e){console.log(" isOther");var t=!1;return this.otherWords.get(e)&&(t=!0),t},o.prototype.isSpace=function(e){console.log(" isSpace");for(var t=!0,s=0;s<e.length;s+=1)if(" "!=e[s]){t=!1;break}return t},o.prototype.initKeyWords=function(){this.keyWords.set("const","const"),this.keyWords.set("let","let"),this.keyWords.set("function","function"),this.keyWords.set("break","break"),this.keyWords.set("while","while"),this.keyWords.set("var","var"),this.keyWords.set("this","this")},o.prototype.initSymbol=function(){this.symbolWords.set('"','"'),this.symbolWords.set("'","'"),this.symbolWords.set("=","="),this.symbolWords.set(";",";"),this.symbolWords.set(":",":"),this.symbolWords.set(">",">"),this.symbolWords.set("{","}"),this.symbolWords.set("(","("),this.symbolWords.set(")",")")},o.prototype.initOther=function(){this.otherWords.set("\n","\n")},o.prototype.findLastNotSpaceToken=function(){for(var e={CodeType:r.CodeType.Default,Token:""},t=this.tokenList.length-1;0<=t;--t){var s=this.tokenList[t];if(s.CodeType!==r.CodeType.Space){e=s;break}}return e},o);function o(){this.keyWords=new Map,this.symbolWords=new Map,this.otherWords=new Map,this.tokenList=[],this.lastCodeType=r.CodeType.Default,this.index=0,this.code="",this.initKeyWords(),this.initSymbol(),this.initOther()}(new(t.default=s)).parseJsCode("const compressing = require('compressing');\n\nconst TAG = 'ProcessTask';\n\nconst CmdType = {\n  CompressZip: 'CompressZip',\n  UnZip: 'UnZip',\n};\nconst obj = {\n    x: 'x',\n    co: function x() {\n      \n    }\n};\nlet arr = [];\nconsole.log(arr);\nconsole.log(obj);\n\nprocess.on('message', (res) => {})")})),o={KeyWords:{color:"#3B8CC2"},"KeyWords:hover":{color:"black","font-size":"28px"},Space:{color:"white",display:"inline-block",width:"10px"},"Space:hover":{color:"black","font-size":"28px"},"Variable:hover":{color:"black","font-size":"28px"},Variable:{color:"#46C3FF"},SymbolS:{color:"#CFCFCF"},"SymbolS:hover":{color:"black","font-size":"28px"},Str:{color:"#D88E73"},"Str:hover":{color:"black","font-size":"28px"},Attribute:{color:"#9DDBEF"},"Attribute:hover":{color:"black","font-size":"28px"}},l=(a.prototype.mapCssToToken=function(e){this.cssClassList=[];for(var t=this.jp.parseJsCode(e),s=0;s<t.length;s+=1){var o=t[s],r={vn:o,cssClass:n.Default};o.CodeType===i.KeyWords?r.cssClass=n.KeyWords:o.CodeType===i.Variable?r.cssClass=n.Variable:o.CodeType===i.Symbol?r.cssClass=n.SymbolS:o.CodeType===i.Str?r.cssClass=n.Str:o.CodeType===i.Attribute?r.cssClass=n.Attribute:o.CodeType===i.Other?r.cssClass=n.Other:o.CodeType===i.Space?r.cssClass=n.Space:console.warn(" code type is not define:",o.CodeType),this.cssClassList.push(r)}return console.log(" CssStyle mapCssToToken res list:",JSON.stringify(this.cssClassList)),this.cssClassList},a.prototype.initCssClass=function(){var t=o,r="";Object.keys(t).forEach(function(e){console.error(e);var s=t[e],o="."+e+" {";Object.keys(s).forEach(function(e){var t=s[e];o+=e+":"+t+";"}),r+=o+="}"}),this.loadClassCode(r)},a.prototype.loadClassCode=function(e){var t=document.createElement("style"),s=document.getElementsByTagName("head")[0];t.type="text/css",t.appendChild(document.createTextNode(e)),s.appendChild(t)},a);function a(){this.jp=new s,this.cssClassList=[],this.initCssClass()}function d(){this.cssStyle=new l}return d.prototype.render=function(e,t){for(var s=this.cssStyle.mapCssToToken(e),o=this.createElement("div"),r=0;r<s.length;r+=1){var i=this.createElement("span",s[r].vn.Token);this.renderClass(s[r].cssClass,i),o.appendChild(i)}console.log(" tokens:",s),t.appendChild(o)},d.prototype.createElement=function(e,t){var s=document.createElement(e);return void 0!==t&&(s.innerText=t),s},d.prototype.renderClass=function(e,t){t.classList.add(e)},d});
